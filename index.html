<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Food Menu</title>

</head>

<body>
  <!-- this will be our html branch! -->

  <h1>Spork</h1>
  <h2>Meal Prep Made Easy</h2>

  <!-- Food Selction Options -->
  <div>
    <input type="text" placeholder="# of Food Increments" id="quantity">

    <select id="size">
      <option value="">Size</option>
      <option value="ounces">Ounce(s)</option>
      <option value="cup">Cup(s)</option>
      <option value="small">Small</option>
      <option value="large">Large</option>
    </select>

    <input type="text" placeholder="Put in Food" id="food-name">
    <button id="search-button">Search</button>
  </div>

  <!-- Food Facts Display -->
  <div>
    <p>Food: <span id="food"></span></p>
    <p>Calories: <span id="calories"></span></p>
    <p>Carbs: <span id="carbs"></span></p>
    <p>Protein: <span id="protein"></span></p>
    <p>Fat: <span id="fat"></span></p>
  </div>

  <!-- Food to Table Function -->
  <div>
    <button id="foodToTable">Move to Table</button>
  </div>

  <div>
    <table>
      <tr>
        <th>Food</th>
        <th>Calories</th>
      </tr>
      <tr id="foodInfo">
        <td id="selectedFood"></td>
        <td id="selectedCalories"></td>
      </tr>
      <tr>
        <td>Total Calories <span id="totalCalories"></span></td>
      </tr>
    </table>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

    var YOUR_APP_ID = '060d6c07';
    var YOUR_APP_KEY = '4caf8f45e89f735e57b03965c8dc01b8';


    $('#search-button').on('click', function () {
      var food = $("#food-name").val();
      var quantity = $("#quantity").val();
      var size = $("#size").val();
      var searchString = quantity + " " + size + " " + food;

      $.ajax({
        url: `https://api.edamam.com/api/nutrition-data?app_id=${YOUR_APP_ID}&app_key=${YOUR_APP_KEY}&ingr=${searchString}`,
        method: "GET"
      }).then(function (response) {
        console.log(response);
        $('#food').text(food);
        $('#calories').text(response.calories);
        $('#carbs').text(response.totalNutrients.CHOCDF.quantity);
        $('#protein').text(response.totalNutrients.PROCNT.quantity);
        $('#fat').text(response.totalNutrients.FAT.quantity);
      })
    });

    $('#foodToTable').on('click', function () {
      var food = $('#food-name').val();
      var calories = $('#calories').text();
      
      // need to get this append underneath
      var td = $('<td>');

        td.val(food) 

      $('#selectedFood').append(food);
      $('#selectedCalories').append(calories);
    })

  </script>
</body>

</html>